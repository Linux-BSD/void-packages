# Template file for 'pine64-rtl8723cs-dkms'
pkgname=pine64-rtl8723cs-dkms
version=4.3.24
revision=1
_commit="700d05d54f72f3232c17ea1e76c4f4c4649ff8ba"

archs=noarch
short_desc="Linux driver for Realtek RTL8723CS chip"
maintainer="Linux-BSD <sec.research.2005@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/Icenowy/rtl8723cs"
distfiles="${homepage}/archive/${_commit}.tar.gz"
checksum=cda484b00facac3128c1b43a96d88576e103e5185ad2b19b179177fb67c3a250
wrksrc="rtl8723cs-${_commit}"
depends="pine64-dkms"

dkms_modules="rtl8723cs 4.3.24"

do_install() {
	local modname=rtl8723cs
	local modver=4.3.24
	local dest=/usr/src/${modname}-${modver}

	vmkdir ${dest}
	cp -r * ${DESTDIR}/${dest}
	cp ${FILESDIR}/dkms.conf ${DESTDIR}/${dest}/dkms.conf

	# modules-load.d(5) file.
	vmkdir usr/lib/modules-load.d
	echo "rtl8812cs" > ${DESTDIR}/usr/lib/modules-load.d/${pkgname}.conf
	chmod 644 ${DESTDIR}/usr/lib/modules-load.d/${pkgname}.conf
}
