# Template file for 'pine64-rtl8723cs-dkms'
pkgname=pine64-rtl8723cs-dkms
version=4.3.23
revision=1
_commit="d7db077004f1497800faabb0e6da775391393711"

archs=noarch
short_desc="Linux driver for Realtek RTL8723CS chip"
maintainer="Linux-BSD <sec.research.2005@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/Icenowy/rtl8723cs"
distfiles="${homepage}/archive/${_commit}.tar.gz"
checksum=38ad98f6e7f711390b3a596360d1a2be56e0f4bea99ea0dd3de1a4d6af535f08
wrksrc="rtl8723cs-${_commit}"
depends="pine64-dkms"

dkms_modules="rtl8723cs 4.3.23"

do_install() {
	local modname=rtl8723cs
	local modver=4.3.22
	local dest=/usr/src/${modname}-${modver}

	vmkdir ${dest}
	cp -r * ${DESTDIR}/${dest}
	cp ${FILESDIR}/dkms.conf ${DESTDIR}/${dest}/dkms.conf

	# modules-load.d(5) file.
	vmkdir usr/lib/modules-load.d
	echo "rtl8812cs" > ${DESTDIR}/usr/lib/modules-load.d/${pkgname}.conf
	chmod 644 ${DESTDIR}/usr/lib/modules-load.d/${pkgname}.conf
}
